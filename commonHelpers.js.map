{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\ndocument.addEventListener(\"DOMContentLoaded\", function () {\n  const dateTimerPicker = document.getElementById('datetime-picker');\n  const startBtn = document.querySelector('[data-start]');\n  const timerDays = document.querySelector('[data-days]');\n  const timerHours = document.querySelector('[data-hours]');\n  const timerMin = document.querySelector('[data-minutes]');\n  const timerSec = document.querySelector('[data-seconds]');\n  let userSelectedDate;\n  startBtn.setAttribute('disabled', 'disabled');\n  \n  const options = {\n    enableTime: true,\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      const currentDate = new Date();\n   \n      if (userSelectedDate.getTime() < currentDate.getTime()) {\n        iziToast.error({\n          title: 'Error',\n          message: 'Please choose a date in the future',\n          position: 'topCenter'\n        });\n        startBtn.setAttribute('disabled', 'disabled');\n      } else {\n        startBtn.removeAttribute('disabled');\n      }\n    },\n    onChange(selectedDates) {\n      userSelectedDate = selectedDates[0];\n      const currentDate = new Date();\n   \n      if (userSelectedDate.getTime() > currentDate.getTime()) {\n        startBtn.removeAttribute('disabled');\n      } else {\n        startBtn.setAttribute('disabled', 'disabled');\n      }\n    },\n  };\n\n  flatpickr(dateTimerPicker, options);\n\n  function addLeadingZero(value) {\n    return value < 10 ? '0' + value : value;\n  }\n\n  function updateTimer() {\n    const currentDate = new Date();\n    const difference = userSelectedDate.getTime() - currentDate.getTime();\n  \n    if (difference <= 0) {\n      clearInterval(timerInterval);\n      timerDays.textContent = '00';\n      timerHours.textContent = '00';\n      timerMin.textContent = '00';\n      timerSec.textContent = '00';\n      iziToast.success({\n        title: 'Success',\n        message: 'Timer finished!',\n        position: 'topCenter'\n      });\n      return;\n    }\n\n    const timeLeft = convertMs(difference);\n    timerDays.textContent = addLeadingZero(timeLeft.days);\n    timerHours.textContent = addLeadingZero(timeLeft.hours);\n    timerMin.textContent = addLeadingZero(timeLeft.minutes);\n    timerSec.textContent = addLeadingZero(timeLeft.seconds);\n  }\n\n  let timerInterval;\n\n  startBtn.addEventListener('click', function () {\n    userSelectedDate = flatpickr.parseDate(dateTimerPicker.value);\n    startBtn.setAttribute('disabled', 'disabled');\n    updateTimer();\n    timerInterval = setInterval(updateTimer, 1000);\n  });\n});\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6, minutes: 42, seconds: 20}"],"names":["dateTimerPicker","startBtn","timerDays","timerHours","timerMin","timerSec","userSelectedDate","flatpickr","selectedDates","currentDate","iziToast","addLeadingZero","value","updateTimer","difference","timerInterval","timeLeft","convertMs","ms","days","hours","minutes","seconds"],"mappings":"2GAKA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,MAAMA,EAAkB,SAAS,eAAe,iBAAiB,EAC3DC,EAAW,SAAS,cAAc,cAAc,EAChDC,EAAY,SAAS,cAAc,aAAa,EAChDC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAW,SAAS,cAAc,gBAAgB,EAClDC,EAAW,SAAS,cAAc,gBAAgB,EACxD,IAAIC,EACJL,EAAS,aAAa,WAAY,UAAU,EAkC5CM,EAAUP,EAhCM,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQQ,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAClC,MAAMC,EAAc,IAAI,KAEpBH,EAAiB,QAAO,EAAKG,EAAY,QAAO,GAClDC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACpB,CAAS,EACDT,EAAS,aAAa,WAAY,UAAU,GAE5CA,EAAS,gBAAgB,UAAU,CAEtC,EACD,SAASO,EAAe,CACtBF,EAAmBE,EAAc,CAAC,EAClC,MAAMC,EAAc,IAAI,KAEpBH,EAAiB,QAAO,EAAKG,EAAY,QAAO,EAClDR,EAAS,gBAAgB,UAAU,EAEnCA,EAAS,aAAa,WAAY,UAAU,CAE/C,CACL,CAEoC,EAElC,SAASU,EAAeC,EAAO,CAC7B,OAAOA,EAAQ,GAAK,IAAMA,EAAQA,CACnC,CAED,SAASC,GAAc,CACrB,MAAMJ,EAAc,IAAI,KAClBK,EAAaR,EAAiB,QAAS,EAAGG,EAAY,QAAO,EAEnE,GAAIK,GAAc,EAAG,CACnB,cAAcC,CAAa,EAC3Bb,EAAU,YAAc,KACxBC,EAAW,YAAc,KACzBC,EAAS,YAAc,KACvBC,EAAS,YAAc,KACvBK,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,kBACT,SAAU,WAClB,CAAO,EACD,MACD,CAED,MAAMM,EAAWC,EAAUH,CAAU,EACrCZ,EAAU,YAAcS,EAAeK,EAAS,IAAI,EACpDb,EAAW,YAAcQ,EAAeK,EAAS,KAAK,EACtDZ,EAAS,YAAcO,EAAeK,EAAS,OAAO,EACtDX,EAAS,YAAcM,EAAeK,EAAS,OAAO,CACvD,CAED,IAAID,EAEJd,EAAS,iBAAiB,QAAS,UAAY,CAC7CK,EAAmBC,EAAU,UAAUP,EAAgB,KAAK,EAC5DC,EAAS,aAAa,WAAY,UAAU,EAC5CY,IACAE,EAAgB,YAAYF,EAAa,GAAI,CACjD,CAAG,CACH,CAAC,EAED,SAASI,EAAUC,EAAI,CAMrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAC1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EACpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EACjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIL,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC"}